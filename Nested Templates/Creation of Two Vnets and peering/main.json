{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters":{
        "vNet1": {
			"type": "string",
			"metadata":{

				"description":"This is the name of the first Vnet to be created."
			}
        },
        "vNet2": {
			"type": "string",
			"metadata":{

				"description":"This is the name of the second Vnet to be created."
			}
		},

		"location": {
			"type": "string"
		},
		"addressPrefix1": {
			"type": "string",
			"defaultValue": "10.0.0.0/16",
			"metadata": {
				"description": "Adress range for the Vnet1."
			}
		},
        
        "addressPrefix2": {
			"type": "string",
			"defaultValue": "10.0.0.0/16",
			"metadata": {
				"description": "Adress range for the Vnet2."
			}
		},
        
        
        "subnetName1": {
        "type": "string"

    },
    "subnetAddressPrefix1": {
        "type": "string",
        "defaultValue":"10.0.0.0/24",
        "metadata": {
            "description": "Address range for first subnet."
        }
    },
    "subnetName2": {
        "type": "string"
    },
    "subnetAddressPrefix2": {
        "type": "string",
        "defaultValue":"10.0.1.0/24",
        "metadata": {
            "description": "Address range for second subnet"
        }
    },
    "subnetName3": {
        "type": "string"
    },
    "subnetAddressPrefix3": {
        "type": "string",
        "defaultValue":"10.0.2.0/24",
        "metadata": {
            "description": "Address range for third subnet"
        }
    },
    "firewallSubnet": {
        "type": "string",
        "defaultValue":"10.0.3.0/24",
        "metadata": {
            "description": "Address range for firewall subnet"
        }
	},
	"networkSecurityGroup1": {
		"type": "string"
	},
	"networkSecurityGroup2": {
		"type": "string"
	},
	"networkSecurityGroup3": {
		"type": "string"
	}
},
    "resources": [
  {
     "type": "Microsoft.Resources/deployments",
     "apiVersion": "2018-05-01",
     "name": "linkedTemplate1",
     "properties": {
       "mode": "Incremental",
       "templateLink": {
          "uri":"https://raw.githubusercontent.com/Souradeep2304/Azure-Templates/master/Vnet%20Template%202/template.json",
          "contentVersion":"1.0.0.0"
       },
       "parametersLink": {
        
        
    }}},
    {
        "type": "Microsoft.Resources/deployments",
        "apiVersion": "2018-05-01",
        "name": "linkedTemplate2",
        "properties": {
          "mode": "Incremental",
    "templateLink": {
        "uri":"https://raw.githubusercontent.com/Souradeep2304/Azure-Templates/master/Vnet%20Template%202/template.json",
        "contentVersion":"1.0.0.0"
     },
     "parametersLink": {
     
    }
}

     }
  
]
{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters":{
        "vNet1": {
			"type": "string",
			"metadata":{

				"description":"This is the name of the first Vnet to be created."
			}
        },
        "vNet2": {
			"type": "string",
			"metadata":{

				"description":"This is the name of the second Vnet to be created."
			}
		},

		"location": {
			"type": "string"
		},
		"addressPrefix1": {
			"type": "string",
			"defaultValue": "10.0.0.0/16",
			"metadata": {
				"description": "Adress range for the Vnet1."
			}
		},
        
        "addressPrefix2": {
			"type": "string",
			"defaultValue": "10.0.0.0/16",
			"metadata": {
				"description": "Adress range for the Vnet2."
			}
		},
        
        
        "subnetName1": {
        "type": "string"

    },
    "subnetAddressPrefix1": {
        "type": "string",
        "defaultValue":"10.0.0.0/24",
        "metadata": {
            "description": "Address range for first subnet."
        }
    },
    "subnetName2": {
        "type": "string"
    },
    "subnetAddressPrefix2": {
        "type": "string",
        "defaultValue":"10.0.1.0/24",
        "metadata": {
            "description": "Address range for second subnet"
        }
    },
    "subnetName3": {
        "type": "string"
    },
    "subnetAddressPrefix3": {
        "type": "string",
        "defaultValue":"10.0.2.0/24",
        "metadata": {
            "description": "Address range for third subnet"
        }
    },
    "firewallSubnet": {
        "type": "string",
        "defaultValue":"10.0.3.0/24",
        "metadata": {
            "description": "Address range for firewall subnet"
        }
    }},
    "resources": [
  {
     "type": "Microsoft.Resources/deployments",
     "apiVersion": "2018-05-01",
     "name": "linkedTemplate1",
     "properties": {
       "mode": "Incremental",
       "templateLink": {
          "uri":"https://raw.githubusercontent.com/Souradeep2304/Azure-Templates/master/Nested%20Templates/Creation%20of%20Two%20Vnets%20and%20peering/NSGcreation.json",
          "contentVersion":"1.0.0.0"
       },
       "parameters": {
		   "networkSecurityGroup1":{"value":"[parameters('networkSecurityGroup1')]"},
		   "networkSecurityGroup2":{"value":"[parameters('networkSecurityGroup2')]"},
		   "networkSecurityGroup3":{"value":"[parameters('networkSecurityGroup3')]"},
		   "subnetAddressPrefix1":{"value":"[parameters('subnetAddressPrefix1')]"},
		   "subnetAddressPrefix2":{"value":"[parameters('subnetAddressPrefix2')]"},
		   "subnetAddressPrefix3":{"value":"[parameters('subnetAddressPrefix3')]"}


        
        
	}
	}
},


    {
        "type": "Microsoft.Resources/deployments",
        "apiVersion": "2018-05-01",
        "name": "linkedTemplate2",
        "properties": {
          "mode": "Incremental",
    "templateLink": {
        "uri":"https://raw.githubusercontent.com/Souradeep2304/Azure-Templates/master/Vnet%20Template%202/template.json",
        "contentVersion":"1.0.0.0"
     },
     "parametersLink": {
     
    }
}

     }
  
]
}